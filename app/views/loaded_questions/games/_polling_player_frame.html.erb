<%# locals: (game:, answer_form:) %>
<%= render "loaded_questions/games/question_card", question: game.question %>

<div class="card shadow-sm" data-controller="reveal" data-reveal-hidden-class="d-none">
  <div class="card-body">
    <h5 class="card-title text-secondary mb-3">
      <i class="bi bi-pencil-square me-2"></i>Your Answer
    </h5>

    <button type="button" data-action="reveal#toggle" class="btn btn-secondary w-100">
      <i class="bi bi-eye me-2"></i>Show / Hide Answer
    </button>

    <%= turbo_frame_tag "answer_form_frame" do %>
      <div data-reveal-target="item" class="<%= "d-none" unless answer_form.show? %>">
        <%= form_with(
          model: answer_form,
          scope: :player,
          url: answer_loaded_questions_game_player_path(game.id),
          method: :patch
        ) do |form| %>
          <div class="mt-3">
            <%= form.text_area :answer,
              aria: { label: "Answer" },
              rows: 3,
              placeholder: "Type your answer here...",
              maxlength: LoadedQuestions::AnswerForm::MAX_LENGTH %>
            <div class="form-text">
              Max <%= LoadedQuestions::AnswerForm::MAX_LENGTH %> characters
            </div>
          </div>

          <%= form.submit "Submit Answer", class: "mt-3 w-100" %>
        <% end %>
      </div>
    <% end %>
  </div>
</div>
